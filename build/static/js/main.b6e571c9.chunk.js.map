{"version":3,"sources":["actions/actions.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/cart-page.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","utils/utils.js","components/spinner/spinner.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/hoc/with-bookstore-service.js","components/pages/home-page.js","components/shop-header/shop-header.js","components/app/app.js","components/error-boundry/error-boundry.js","reducers/updateBookList.js","reducers/updateShoppingCart.js","store.js","reducers/reducer.js","services/data.js","index.js","services/bookstore-service.js"],"names":["bookAddedToCard","bookId","type","payload","booksFetch","bookstoreService","dispatch","getBooks","then","data","catch","err","mapDispatchToProps","onIncrease","onDecrese","onDelete","connect","shoppingCart","items","cartItems","total","orderTotal","className","map","item","idx","id","title","count","onClick","CartPage","BookListItem","book","onAddedToCard","author","price","coverImage","src","alt","to","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","compose","funcs","comp","reduceRight","wrapped","f","Spinner","ErrorIndicator","BookList","books","BookListContainer","this","props","fetchBooks","loading","error","Component","Wrapped","bookList","ownProps","bindActionCreators","HomePage","numItems","length","App","role","path","component","exact","ErrorBoundry","state","hasError","setState","children","updateBookList","action","undefined","updateCartItems","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateShoppingCart","store","createStore","applyMiddleware","thunkMiddleware","next","Promise","resolve","reject","setTimeout","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.b6e571c9.chunk.js","sourcesContent":["const booksLoaded = (newBooks) => {\n  return {\n    type: 'FETCH_BOOKS_SUCCESS',\n    payload: newBooks,\n  };\n};\n\nconst booksRequested = () => 'FETCH_BOOKS_REQUEST';  \n\nconst booksError = (error) => {\n  return {\n    type: 'FETCH_BOOKS_FAILUR',\n    payload: error    \n  };\n};\nexport const bookAddedToCard = (bookId) => {\n  return {\n    type: 'BOOK_ADED_TO_CART',\n    payload: bookId,\n  }\n}\n\nexport const increaseBookCount = (bookId) => {\n  return {\n    type: 'INCREASE_BOOK_COUNT',\n    payload: bookId\n  }\n}\nexport const decreaseBookCount = (bookId) => {\n  return {\n    type: 'DECREASE_BOOK_COUNT',\n    payload: bookId\n  }\n}\nexport const deleteBookFromCart = (bookId) => {\n  return {\n    type: 'DELETE_BOOK_FROM_CART',\n    payload: bookId\n  }\n}\n\n// const oldBooksFetch = (dispatch, bookstoreService) => () => {\n//   dispatch(booksRequested());\n\n//   bookstoreService.getBooks()\n//   .then(data=>{\n//     dispatch(booksLoaded(data))\n//   })\n//   .catch(err => {\n//     dispatch(booksError(err))\n//   });\n// }\n\nconst booksFetch = (bookstoreService) => () => (dispatch) => {\n  dispatch(booksRequested());\n\n  bookstoreService.getBooks()\n  .then(data=>{\n    dispatch(booksLoaded(data))\n  })\n  .catch(err => {\n    dispatch(booksError(err))\n  });\n}\n\nexport default booksFetch\n","import React from 'react';\nimport './shopping-cart-table.css';\nimport { connect } from 'react-redux';\nimport { decreaseBookCount, deleteBookFromCart, bookAddedToCard} from '../../actions/actions';\n \n\nconst ShoppingCartTable = ({items, total, onIncrease, onDecrese, onDelete}) => {\n  const renderRow = (item, idx) => {\n    const {id, title, count, total } = item;\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>$ {total}</td>\n        <td className='cart-button'>\n          <button\n            onClick={() => onDelete(id)}\n            className=\"btn btn-outline-danger btn-sm float-right\"\n          >\n            <i className=\"fa fa-trash-o\" />\n          </button>\n          <button\n            onClick={() => onIncrease(id)}\n            className=\"btn btn-outline-success btn-sm float-right\"\n          >\n            <i className=\"fa fa-plus-circle\" />\n          </button>\n          <button\n            onClick={() => onDecrese(id)}\n            className=\"btn btn-outline-warning btn-sm float-right\"\n          >\n            <i className=\"fa fa-minus-circle\" />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  return (\n    <div className=\"shopping-cart-table\">\n      <h2>Your Order</h2>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Total</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {items.map(renderRow)}\n        </tbody>\n      </table>\n      <div className=\"total\">Total: ${total}</div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: {cartItems, orderTotal }}) => {\n  return {\n    items: cartItems,\n    total: orderTotal,\n  }\n}\n\nconst mapDispatchToProps = {  \n  onIncrease: bookAddedToCard,\n  onDecrese: decreaseBookCount,\n  onDelete: deleteBookFromCart,  \n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\n","import React from 'react';\nimport ShoppingCartTable from '../shopping-cart-table/shopping-cart-table';\n\nconst CartPage = () => {\n  return <ShoppingCartTable />\n};\n\nexport default CartPage;","import './book-list-item.css'\nimport { Link } from 'react-router-dom';\nimport React from 'react';\n\nexport const BookListItem = ({ book, onAddedToCard }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <div className=\"book-list-item\">\n      <div className=\"book-cover\">\n        <img src={coverImage} alt=\"cover\" />\n      </div>\n      <div className=\"book-details\">\n        <Link to=\"/\" >\n          <div className=\"book-title\">\n            {title}\n          </div>\n        </Link>\n        <div className=\"book-author\">{author}</div>\n        <div className=\"book-price\">${price}</div>\n        <button\n          onClick={onAddedToCard}\n          className=\"btn btn-info add-to-cart\">Add to cart</button>\n      </div>\n\n    </div>\n  );\n};","import React from 'react';\n\nexport const {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();","const compose = (...funcs) => (comp) => {\n  return funcs.reduceRight(\n    (wrapped, f) => f(wrapped), comp);\n};\n\nexport default compose;\n","import React from 'react';\nimport './spinner.css';\n\nexport const Spinner = () => {\n  return (\n    <div className=\"loadingio-spinner-spin-tnqs41ptmho\">\n      <div className=\"ldio-1bxnukadja2\">\n        <div>\n          <div></div>\n        </div>\n        <div>\n          <div></div>\n        </div>\n        <div>\n          <div></div>\n        </div>\n        <div>\n          <div></div>\n        </div>\n        <div>\n          <div></div>\n        </div>\n        <div>\n          <div></div>\n        </div>\n        <div>\n          <div></div>\n        </div>\n        <div>\n          <div></div>\n        </div>\n        <div>\n          <div></div>\n        </div>\n        <div>\n          <div></div>\n        </div>\n        <div>\n          <div></div>\n        </div>\n      </div>\n    </div>\n  );\n}","import React from 'react';\n\nexport const ErrorIndicator = () => {\n  return (\n    <div>\n      <h2>something has gone terribly wrong</h2>\n    </div>\n  )\n}","import React, { Component } from 'react';\nimport { BookListItem } from '../book-list-item/book-list-item';\nimport { connect } from 'react-redux';\nimport { withBookstoreService } from '../hoc/with-bookstore-service';\nimport booksFetch, { bookAddedToCard } from '../../actions/actions'\nimport compose from '../../utils/utils';\nimport './book-list.css'\nimport { Spinner } from '../spinner/spinner';\nimport { ErrorIndicator } from '../error-indicator/error-indicator';\nimport { bindActionCreators } from 'redux'\n\nconst BookList = ({ books, onAddedToCard }) => {  \n  return (\n    <ul className='book-list'>\n      {\n        books.map((book)=>{\n          return (\n            <li key={book.id}><BookListItem\n            onAddedToCard={()=>onAddedToCard(book.id)}\n            book={book}/> </li>\n          )\n        })\n      }\n    </ul>\n  )\n}\n\nclass BookListContainer extends Component {\n\n  componentDidMount() {    \n    this.props.fetchBooks()\n  }\n\n  render() {\n    \n    const {books, loading, error, onAddedToCard} = this.props;\n\n    if(loading) {\n      return  <Spinner/>\n    }\n\n    if(error) {\n      return <ErrorIndicator/>\n    }\n    \n    return <BookList\n      onAddedToCard={onAddedToCard}\n      books={books}/>\n  }\n}\n\nconst mapStateToProps= ({ bookList: {books, loading, error} }) => {\n  return { books, loading, error };\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  const { bookstoreService } = ownProps;\n  return bindActionCreators(\n    {\n    fetchBooks: booksFetch(bookstoreService),\n    onAddedToCard: bookAddedToCard,\n    }, dispatch\n  )\n    \n    \n  \n}\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, mapDispatchToProps)\n)(BookListContainer);","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context/bookstore-service-context';\n\nexport const withBookstoreService = () => (Wrapped) => {\n\n  return (props) => {\n    return (\n      <BookstoreServiceConsumer>\n        {\n          (bookstoreService) => {\n            return (\n              <Wrapped {...props}\n                bookstoreService={bookstoreService}/>\n            );\n          }\n        }\n      </BookstoreServiceConsumer>\n    );\n  }\n};","import React from 'react';\nimport BookList from '../book-list/book-list';\n\nexport const HomePage = () => {\n  return (\n    <div>\n      <BookList />      \n    </div>\n  );\n};","import React from 'react';\nimport './shop-header.css';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst ShopHeader = ({ numItems, total }) => {\n  return (\n    <header className=\"shop-header row\">\n      <Link to='/'>\n        <div className=\"logo text-dark\">ReStore </div>\n      </Link>\n      <Link to='/cart'>\n        <div className=\"shopping-cart\">\n          <i className=\"cart-icon fa fa-shopping-cart\" />\n          {numItems} items (${total})\n        </div>        \n      </Link>\n    </header>\n  );\n};\n\nconst mapStateToProps = ({shoppingCart: {cartItems, orderTotal}}) => {\n  return {\n    numItems: cartItems.length,\n    total: orderTotal\n  }\n}\n\nexport default connect(mapStateToProps)(ShopHeader);\n\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport CartPage from '../pages/cart-page';\n\n\n\nimport { HomePage } from '../pages/home-page';\nimport ShopHeader from '../shop-header/shop-header';\nconst App = () => {\n  return (\n    <main role=\"main\" className=\"container\">\n      <ShopHeader/>\n      <Switch>\n        <Route\n          path=\"/\"\n          component={HomePage}\n          exact />\n\n        <Route\n          path=\"/cart\"\n          component={CartPage}\n          exact\n          />\n      </Switch>\n    </main>\n  );\n};\n\nexport default  App;","import React from 'react';\nimport { ErrorIndicator } from '../error-indicator/error-indicator';\n\nexport default class ErrorBoundry extends React.Component {\n  state = {\n    hasError: false,\n  }\n\n  componentDidCatch() {\n    this.setState({ hasError: true })\n  }\n \n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator/>\n    } else {      \n      return this.props.children\n    }  \n  }\n}","export const updateBookList = (state, action) => {\n  if(state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null,\n    }\n  }\n\n  switch (action.type) {\n    case 'FETCH_BOOKS_SUCCESS': \n      return {\n        books : action.payload,\n        loading: false,\n        error: null\n      };\n\n    case 'FETCH_BOOKS_REQUEST': \n      return {\n        books : [],\n        loading: true,\n        error: null\n      };\n\n    case 'FETCH_BOOKS_FAILUR': \n      return {\n        books : [],\n        loading: false,\n        error: action.payload\n      };\n    default:      \n      return state.bookList;\n  }\n}","const updateCartItem = (book, item = {}, quantity) => {\n  const {\n    id = book.id,\n    count = 0,\n    title = book.title,\n    total = 0 \n  } = item;\n\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity * book.price\n  };\n}\n\nconst updateCartItems = (cartItems, item, idx) => {\n  if( item.count === 0 ){\n    return [\n      ...cartItems.slice(0, idx),\n      ...cartItems.slice(idx + 1),\n    ];\n  }\n  if( idx === -1 ){\n    return [\n      ...cartItems,\n      item\n    ];\n  }\n  return [\n    ...cartItems.slice(0, idx),\n    item,\n    ...cartItems.slice(idx + 1),\n  ]\n}\n\n// const updateTotalOfOrders = (state) => {\n//   if(state.shoppingCart){\n//     return state.shoppingCart.cartItems.reduce((item, acc) => acc + item.total, 0)\n//   }\n  \n// }\n\nconst updateOrder = (state, bookId, quantity) => {\n  const { bookList:{books}, shoppingCart:{cartItems, orderTotal} } = state; \n  const book = books.find(({id}) => id === bookId);\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\n  const item = cartItems[itemIndex];\n\n  const newItem = updateCartItem(book, item, quantity);\n  return {\n    orderTotal: orderTotal + quantity * book.price,\n    cartItems: updateCartItems(cartItems, newItem, itemIndex),\n  };\n};\n\nexport const updateShoppingCart = (state, action) => {\n  if(state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0,\n    }\n  }\n\n  switch(action.type) {\n    case 'BOOK_ADED_TO_CART':\n      return updateOrder(state, action.payload, 1)\n\n    case 'DECREASE_BOOK_COUNT':\n      return updateOrder(state, action.payload, -1)\n      \n    case 'DELETE_BOOK_FROM_CART':\n      const item = state.shoppingCart.cartItems.find(({ id }) => id === action.payload);\n      return updateOrder(state, action.payload, -item.count) \n\n    default:      \n      return state.shoppingCart;\n  }\n}","import { applyMiddleware, createStore } from 'redux';\nimport { reducer } from './reducers/reducer';\nimport thunkMiddleware from 'redux-thunk';\n\nconst stringMidlewere = () => next => action => {\n  if(typeof(action) === 'string') {\n    return next({ type: action });\n  }\n\n  return next(action);\n}\n \nexport const store = createStore(reducer, applyMiddleware(thunkMiddleware, stringMidlewere));","import { updateBookList } from \"./updateBookList\";\nimport { updateShoppingCart } from \"./updateShoppingCart\";\n\nexport const reducer = (state, action) => {\n  return {\n    shoppingCart: updateShoppingCart(state, action),\n    bookList: updateBookList(state, action),\n  }\n}\n\n\n\n","export const data = [\n  {\n    id: 1,\n    title: 'Production-Ready Microservices',\n    author: 'Susan J. Fowler',\n    price: 32,\n    coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'},\n  {\n    id: 2,\n    title: 'Release It!',\n    author: 'Michael T. Nygard',\n    price: 45,\n    coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'},\n  {\n    id: 3,\n    title: 'Billy SummersBilly',\n    author: 'Stephen King',\n    price: 18,\n    coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51f2iIrG6TL._AC_SX184_.jpg'},\n  {\n    id: 4,\n    title: 'Time for School, Little Blue Truck',\n    author: 'Alice Schertle',\n    price: 9,\n    coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51E+TsPtBJS._AC_SX184_.jpg'},\n  {\n    id: 5,\n    title: 'Adulting: How to Become a Grown-up in 535 Easy(ish) Steps',\n    author: 'Kelly Williams Brown',\n    price: 12,\n    coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51TG+5t0VSL._SY344_BO1,204,203,200_.jpg'},\n  {\n    id: 6,\n    title: 'The Body Keeps the Score: Brain, Mind, and Body in the Healing of Trauma',\n    author: ' Bessel van der Kolk M.D.',\n    price: 45,\n    coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41D3enj6JVS._SX324_BO1,204,203,200_.jpg'},\n];","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './components/app/app';\nimport ErrorBoundry from './components/error-boundry/error-boundry';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context/bookstore-service-context';\nimport { store } from './store';\nimport BookstoreService from './services/bookstore-service';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App/>\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>\n  , document.getElementById('root'));","import { data } from \"./data\"\n\nexport default class BookstoreService {\n  getBooks() {\n    return new Promise( (resolve, reject) => {\n      //setTimeout(()=>{reject('Oops')}, 700)\n      setTimeout(()=>{resolve(data)}, 700)\n    })\n  }\n}\n"],"sourceRoot":""}